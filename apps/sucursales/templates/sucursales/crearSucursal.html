{% extends 'base.html' %}
{% load staticfiles %}
{% load bootstrap3 %}


{% block titulo %}Gestión de sucursales{% endblock titulo %}
{% block descripcion_pagina %} Gestiona las sucursales CINEMAPP {% endblock descripcion_pagina %}
{% block miga_pan %}
<li><a href="{% url 'accounts:home'%}"><i class="fa fa-dashboard"></i> DASHBOARD</a></li>
<li class="active">GESTIONAR SUCURSALES</li>
{% endblock miga_pan %}

{% block css %}
<link rel="stylesheet" href="{%  static 'bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css' %}">
<link href="{% static 'bower_components/datatables.net-bs/responsive/responsive.dataTables.min.css' %}" rel="stylesheet">
{{ form_empleado.media.css }}
<style media="screen">
    .select2-container {
        width: 100% !important;
    }
</style>
{% endblock css %}

{% block contenido %}

<div class="col-md-12">
    <div class="box box-primary">
        <div class="box-header">
            <h3 class="box-title">Registrar sucursales</h3>
        </div>
        <div class="box-body">
            <form method="POST" id="formulario" onsubmit="return validacion_sucursal()"> {% csrf_token %}

                <div class="row">


                    <div class="col-sm-4">
                        {% bootstrap_field form.nombre%}
                    </div>
                    <div class="col-sm-4">
                        {% bootstrap_field form.direccion%}
                    </div>
                    <div class="col-sm-2">
                        {% bootstrap_field form.telefono%}
                    </div>
                    <div class="col-sm-2">
                        <br><br> <!-- br para poder que el activo quede en linea con el formulario -->
                        {% bootstrap_field form.is_active%}
                    </div>


                </div>
                <button type="submit" class="btn btn-success btn-raised">Registrar</button>
            </form>
        </div>
    </div>
</div>


<div class="col-md-12">
    <div class="box box-primary">
        <div class="box-header">
            <h3 class="box-title">Listado de sucursales</h3>
        </div>
        <div class="box-body">
            <table id="tabla_sucursales" class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Dirección</th>
                    <th>Teléfono</th>
                    <th>Gerente</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                {% for sucursal in sucursales %}
                <tr>
                    <td>{{ sucursal.nombre }}</td>
                    <td>{{ sucursal.direccion }}</td>
                    <td>{{ sucursal.telefono }}</td>
                    <td>{{ sucursal.gerente }}</td>
                    <td>
                        {%  if sucursal.is_active %} <span class="badge bg-green">Activo</span>
                        {% else %} <span class="badge bg-red">Inactivo</span>
                        {% endif %}
                    </td>
                    <td><a href="{% url 'sucursales:editar_sucursal' sucursal.id %}">Editar sucursal</a></td>
                </tr>
                {% endfor %}

                </tbody>
            </table>

        </div>
    </div>
</div>


{% endblock contenido %}

{% block js %}
<script src="{% static 'dist/js/validacion_sucursal.js' %}"></script>
<script src="{% static 'plugins/toastr/toastr.min.js' %}"></script>
<script src="{% static 'bower_components/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<script src="{% static 'bower_components/datatables.net-bs/responsive/dataTables.responsive.min.js' %}"></script>
{{ form_sucursal.media.js }}

<script type="text/javascript">
        $('#tabla_sucursales').DataTable({
          responsive: true
        })
</script>

{% endblock js %}
